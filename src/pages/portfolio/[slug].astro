---
import Layout from "@/layouts/Layout.astro";
import { getSingleProjectData } from "@/lib/getContent";
import Header from "@/sections/portfolio/Header.astro";
import { Icon } from "astro-icon/components";

const { slug } = Astro.params;

const projectData = await getSingleProjectData(slug ?? "");
---

<Layout>
  <main>
    <Header title={projectData.title} />

    <a href="/portfolio" class="flex flex-wrap md:px-24 lg:px-48 mt-8 pl-6">
      <Icon name="mdi:arrow-left-thin" class=`w-6 h-6 text-black` />
      <p class="pt-[1px] pl-1">Back</p>
    </a>

    <div class="flex flex-wrap bg-white py-3 px-4 md:py-6 md:px-24 lg:px-48">
      <!-- Image Container -->
      <div class="w-full md:w-1/4 p-2">
        <img
          src={projectData.imageUrl}
          alt={projectData.title}
          class="max-w-full max-h-[500px] object-contain rounded"
          style={{ maxHeight: "500px" }}
        />
      </div>

      <!-- Description Container -->
      <div
        class="w-full md:w-3/4 text-left pl-4 pr-4 md:pl-12 md:pr-24 lg:pl-24 lg:pr-36 text-gray-500"
      >
        <p class="mt-2 text-sm md:text-base">
          {projectData.description}
        </p>

        <ul class="pt-4 list-disc pl-4 md:pl-12 space-y-2">
          <li>
            <span class="font-bold">Completed:</span>
            {projectData.dates}
          </li>
          <li><span class="font-bold">Tools:</span> {projectData.tools}</li>
          {
            projectData.extraLinks?.map((link) => (
              <li>
                <span class="font-bold">{link.title}:</span>
                <a
                  href={link.url}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-blue-500 hover:underline"
                >
                  {link.url}
                </a>
              </li>
            ))
          }
        </ul>
      </div>
    </div>

    {
      projectData.screenshotUrls && projectData.screenshotUrls.length > 0 ? (
        <div class="text-center w-full mb-4">
          <p class="text-gray-500 font-bold text-xl">Screenshots</p>
        </div>
      ) : null
    }

    <div class="w-full flex justify-center bg-white pb-24">
      <div class="flex flex-wrap justify-center items-start gap-x-4">
        {
          projectData.screenshotUrls && projectData.screenshotUrls.length > 0
            ? projectData.screenshotUrls.map((url, index) => (
                <div class="p-2">
                  <img
                    src={url}
                    alt={`Screenshot ${index + 1}`}
                    class="w-[670px] object-contain rounded-lg shadow-lg"
                  />
                </div>
              ))
            : null
        }
      </div>
    </div>
  </main>
</Layout>
